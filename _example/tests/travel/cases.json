[
  {
    "name": "Basic Flight (Single Service)",
    "query": "query GetFlight($number: String!, $date: String!) { flight(number: $number, departureDate: $date) { number departureDate origin destination } }",
    "variables": { "number": "AA100", "date": "2026-03-01" },
    "expected": {
      "flight": {
        "number": "AA100",
        "departureDate": "2026-03-01",
        "origin": "SFO",
        "destination": "JFK"
      }
    }
  },
  {
    "name": "Flight with Bookings (Federation Extension)",
    "query": "query FlightWithBookings($number: String!, $date: String!) { flight(number: $number, departureDate: $date) { number origin destination bookings { id } } }",
    "variables": { "number": "AA100", "date": "2026-03-01" },
    "expected": {
      "flight": {
        "number": "AA100",
        "origin": "SFO",
        "destination": "JFK",
        "bookings": [
          {
            "id": "booking1"
          }
        ]
      }
    }
  },
  {
    "name": "Booking with Flight Reference",
    "query": "query FlightBookings($number: String!, $date: String!) { flight(number: $number, departureDate: $date) { bookings { id flight { number origin destination } } } }",
    "variables": { "number": "AA100", "date": "2026-03-01" },
    "expected": {
      "flight": {
        "bookings": [
          {
            "id": "booking1",
            "flight": {
              "number": "AA100",
              "origin": "SFO",
              "destination": "JFK"
            }
          }
        ]
      }
    }
  },
  {
    "name": "Typename Check (Composite Key)",
    "query": "query TypenameCheck($number: String!, $date: String!) { flight(number: $number, departureDate: $date) { __typename number departureDate bookings { __typename id flight { __typename number } } } }",
    "variables": { "number": "AA100", "date": "2026-03-01" },
    "expected": {
      "flight": {
        "__typename": "Flight",
        "number": "AA100",
        "departureDate": "2026-03-01",
        "bookings": [
          {
            "__typename": "Booking",
            "id": "booking1",
            "flight": {
              "__typename": "Flight",
              "number": "AA100"
            }
          }
        ]
      }
    }
  },
  {
    "name": "Federation Feature: Fragment Spread",
    "description": "Verify fragment spread support with named fragments",
    "query": "query { flight(number: \"AA100\", departureDate: \"2026-03-01\") { ...FlightFields } } fragment FlightFields on Flight { number origin destination }",
    "variables": {},
    "expected": {
      "flight": {
        "number": "AA100",
        "origin": "SFO",
        "destination": "JFK"
      }
    }
  },
  {
    "name": "Federation Feature: Inline Fragments",
    "description": "Verify inline fragment support",
    "query": "query { flight(number: \"AA100\", departureDate: \"2026-03-01\") { number ... on Flight { origin destination } } }",
    "variables": {},
    "expected": {
      "flight": {
        "number": "AA100",
        "origin": "SFO",
        "destination": "JFK"
      }
    }
  },
  {
    "name": "Federation Feature: Nested Fragments",
    "description": "Verify nested fragment expansion (fragments referencing other fragments)",
    "query": "query { flight(number: \"AA100\", departureDate: \"2026-03-01\") { ...FlightWithRoute } } fragment FlightWithRoute on Flight { ...FlightNumber ...RouteInfo } fragment FlightNumber on Flight { number } fragment RouteInfo on Flight { origin destination }",
    "variables": {},
    "expected": {
      "flight": {
        "number": "AA100",
        "origin": "SFO",
        "destination": "JFK"
      }
    }
  },
  {
    "name": "Federation v2: @requires - Total Cost Computation",
    "description": "Verify that @requires automatically fetches price field for totalCost calculation",
    "query": "query { flight(number: \"AA100\", departureDate: \"2026-03-01\") { number totalCost } }",
    "variables": {},
    "expected": {
      "flight": {
        "number": "AA100",
        "totalCost": 550
      }
    }
  }
]
